import{a as O}from"./chunk-RONTLNGB.js";import{a as b}from"./chunk-7V2HVGNQ.js";import{a as w}from"./chunk-XIXW3NB4.js";import{b as R,c as k,d as F,e as P,h as M}from"./chunk-I6WBTFIN.js";import{q as h,r as E,s as T}from"./chunk-MGBRLVRV.js";import"./chunk-PMXBU2MZ.js";import{m as A,r as I}from"./chunk-P6FRCD3I.js";import{Ib as f,Kb as i,Ub as s,Vb as r,Wb as _,fc as g,na as C,ob as n,pb as x,pc as c,qc as L,ta as u,xc as S,yc as m,z as v,za as y}from"./chunk-LLXA3JIY.js";var l=T("roleState"),W=E(l,e=>e);var d=(()=>{let t=class t{constructor(){this.store=u(h),this.router=u(k)}canActivate(o){return this.store.select(l).pipe(v(p=>o.data.role.includes(p)?!0:(alert("You do not have access to this page. Please register or log in"),this.router.navigateByUrl("/"),!1)))}};t.\u0275fac=function(p){return new(p||t)},t.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var D=()=>["/home"],H=()=>["/profile"],U=()=>["/orders"],z=()=>["/signin"],B=()=>["/signup"],N=()=>["/admin-page"];function Y(e,t){e&1&&(s(0,"a",2),c(1,"Profile"),r()),e&2&&i("routerLink",m(1,H))}function q(e,t){if(e&1&&(s(0,"a",2),c(1),r()),e&2){let a=g(2);i("routerLink",m(2,U)),n(),L(a.isAdmin?"Orders":"My orders")}}function J(e,t){e&1&&(s(0,"div")(1,"a",2),c(2,"Sign in"),r(),s(3,"a",2),c(4,"Sign up"),r()()),e&2&&(n(),i("routerLink",m(2,z)),n(2),i("routerLink",m(3,B)))}function K(e,t){e&1&&(s(0,"div")(1,"a",2),c(2,"Admin"),r()()),e&2&&(n(),i("routerLink",m(1,N)))}function Q(e,t){if(e&1&&(s(0,"div")(1,"nav",1)(2,"div")(3,"a",2),c(4,"Home"),r(),f(5,Y,2,2,"a",3)(6,q,2,3,"a",3),r(),f(7,J,5,4,"div",0)(8,K,3,2,"div",0),r(),_(9,"router-outlet"),r()),e&2){let a=g();n(3),i("routerLink",m(5,D)),n(2),i("ngIf",a.isAdmin||a.isClient),n(),i("ngIf",a.isAdmin||a.isClient),n(),i("ngIf",a.isGuest),n(),i("ngIf",a.isAdmin)}}var j=(()=>{let t=class t{constructor(o){this.store=o,this.isAdmin=!1,this.isClient=!1,this.isGuest=!1,this.roleService=u(b),this.role$=this.store.select(l),this.role=localStorage.getItem("role")||O,this.role$=this.store.select(l)}ngOnInit(){this.roleService.isAuthorized().subscribe(o=>{this.store.dispatch(w.changeRole({role:o})),localStorage.setItem("role",o)}),this.role$.subscribe(o=>{localStorage.setItem("role",o),this.role=o,this.isAdmin=o.toLocaleLowerCase().includes("manager"),this.isClient=o.toLocaleLowerCase().includes("user"),this.isGuest=o.toLocaleLowerCase().includes("guest")})}};t.\u0275fac=function(p){return new(p||t)(x(h))},t.\u0275cmp=y({type:t,selectors:[["app-layout"]],standalone:!0,features:[S],decls:1,vars:1,consts:[[4,"ngIf"],[1,"nav"],["routerLinkActive","active",3,"routerLink"],["routerLinkActive","active",3,"routerLink",4,"ngIf"]],template:function(p,G){p&1&&f(0,Q,10,6,"div",0),p&2&&i("ngIf",G.role!=="null")},dependencies:[M,R,F,P,I,A],styles:[".nav[_ngcontent-%COMP%]{background-color:#f2f2f2;display:flex;justify-content:space-between;padding:15px 60px}a[_ngcontent-%COMP%]{text-decoration:none;color:#000;margin:0 10px}"]});let e=t;return e})();var xe=[{path:"",component:j,children:[{path:"signin",loadComponent:()=>import("./chunk-FXLMNXE3.js").then(e=>e.SigninComponent),canActivate:[d],data:{role:["guest"]}},{path:"signup",loadComponent:()=>import("./chunk-GSXJDTFK.js").then(e=>e.SignupComponent),canActivate:[d],data:{role:["guest"]}},{path:"home",loadComponent:()=>import("./chunk-SNKA5PFS.js").then(e=>e.HomePageComponent)},{path:"",pathMatch:"full",redirectTo:"home"},{path:"profile",loadComponent:()=>import("./chunk-ROW4TJQA.js").then(e=>e.UserProfilePageComponent),canActivate:[d],data:{role:["manager","user"]}},{path:"orders",loadComponent:()=>import("./chunk-Y4A4NKGE.js").then(e=>e.OrdersComponent),canActivate:[d],data:{role:["manager","user"]}},{path:"admin-page",loadComponent:()=>import("./chunk-ZUKSWEVA.js").then(e=>e.AdminOverviewPageComponent),canActivate:[d],data:{role:["manager"]},children:[{path:"stations",loadComponent:()=>import("./chunk-CPRRFCF7.js").then(e=>e.StationsPageComponent)},{path:"carriages",loadComponent:()=>import("./chunk-L7SMFIPQ.js").then(e=>e.CarriagesPageComponent)},{path:"routes",loadComponent:()=>import("./chunk-TIR3SUOQ.js").then(e=>e.RoutesPageComponent),children:[{path:"",loadComponent:()=>import("./chunk-U625ZT65.js").then(e=>e.RouteListComponent)},{path:":id",loadComponent:()=>import("./chunk-AOEG6WE4.js").then(e=>e.RidePageComponent)}]},{path:"",redirectTo:"stations",pathMatch:"full"}]},{path:"",redirectTo:"admin-page",pathMatch:"full"}]}];export{xe as layoutRoutes};
